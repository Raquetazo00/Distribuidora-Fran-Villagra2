<MenuPrincipalScreen>:

    MDBoxLayout:
        orientation: "vertical"
        padding: dp(20)
        spacing: dp(15)
        md_bg_color: 0.96, 0.96, 0.97, 1

        # ============================
        # HEADER
        # ============================
        MDBoxLayout:
            size_hint_y: None
            height: dp(60)
            padding: dp(10)
            spacing: dp(10)

            MDLabel:
                text: "Menú Principal"
                font_style: "H5"
                bold: True
                theme_text_color: "Primary"

            Widget:

            MDLabel:
                text: root.hora_actual
                font_style: "H6"
                halign: "right"
                theme_text_color: "Secondary"

            MDRaisedButton:
                text: "Salir"
                md_bg_color: 0.9, 0.2, 0.2, 1
                text_color: 1,1,1,1
                on_release: root.confirmar_salida()
                size_hint: None, None
                width: dp(100)
                height: dp(40)

        # ============================
        # BUSCADOR
        # ============================
        MDBoxLayout:
            size_hint_y: None
            height: dp(55)
            spacing: dp(10)

            MDTextField:
                id: buscar_input
                hint_text: "Buscar producto por nombre o código..."
                mode: "rectangle"
                on_text_validate: root.programar_busqueda(self.text)

            MDRaisedButton:
                text: "Buscar"
                md_bg_color: 0.15, 0.55, 0.85, 1
                text_color: 1,1,1,1
                size_hint_x: None
                width: dp(130)
                on_release: root.buscar_producto(buscar_input.text)

        # ============================
        # TÍTULO PRODUCTOS
        # ============================
        MDLabel:
            text: "Productos disponibles"
            font_style: "H6"
            size_hint_y: None
            height: dp(35)
            theme_text_color: "Primary"

        # ============================
        # TABLA DE PRODUCTOS
        # ============================
        MDCard:
            radius: dp(15)
            elevation: 8
            padding: dp(10)
            size_hint_y: None
            height: dp(230)
            md_bg_color: 1,1,1,1

            ScrollView:
                MDBoxLayout:
                    id: tabla_productos
                    orientation: "vertical"
                    spacing: dp(8)
                    padding: dp(10)
                    size_hint_y: None
                    height: self.minimum_height

        # ============================
        # TÍTULO CARRITO
        # ============================
        MDLabel:
            text: "Productos en la venta actual"
            font_style: "H6"
            size_hint_y: None
            height: dp(35)
            theme_text_color: "Primary"

        # ============================
        # TABLA CARRITO
        # ============================
        MDCard:
            radius: dp(15)
            elevation: 8
            padding: dp(10)
            size_hint_y: None
            height: dp(230)
            md_bg_color: 1,1,1,1

            ScrollView:
                MDBoxLayout:
                    id: tabla_carrito
                    orientation: "vertical"
                    spacing: dp(8)
                    padding: dp(10)
                    size_hint_y: None
                    height: self.minimum_height

        # ============================
        # TOTAL + BOTÓN
        # ============================
        MDBoxLayout:
            size_hint_y: None
            height: dp(65)
            spacing: dp(10)
            padding: dp(5)

            MDLabel:
                id: lbl_total
                text: "Total: $0.00"
                font_style: "H5"
                bold: True
                theme_text_color: "Primary"

            MDRaisedButton:
                text: "Previsualizar Venta"
                md_bg_color: 0.15, 0.6, 0.35, 1
                text_color: 1,1,1,1
                font_size: dp(18)
                on_release: root.previsualizar_venta()
                size_hint: None, None
                width: dp(230)
                height: dp(50)
