<AgregarProductoScreen>:
    name: "agregar_producto"

    MDBoxLayout:
        orientation: "vertical"
        padding: dp(20)
        spacing: dp(10)
        md_bg_color: 0.97, 0.97, 0.97, 1

        MDLabel:
            text: "Gesti贸n de Productos"
            halign: "center"
            font_style: "H4"
            size_hint_y: None
            height: dp(50)

        MDBoxLayout:
            orientation: "horizontal"
            spacing: dp(20)
            padding: dp(10)
            size_hint_y: 1

            # ======================================
            # FORMULARIO IZQUIERDA
            # ======================================
            MDCard:
                orientation: "vertical"
                size_hint: 0.45, 1
                padding: dp(25)
                spacing: dp(20)
                elevation: 6
                radius: [20]

                MDLabel:
                    text: "Registrar / Editar Producto"
                    halign: "center"
                    font_style: "H6"
                    size_hint_y: None
                    height: dp(30)

                MDTextField:
                    id: nombre_input
                    hint_text: "Nombre del producto"
                    mode: "rectangle"

                MDTextField:
                    id: descripcion_input
                    hint_text: "Descripci贸n"
                    mode: "rectangle"

                MDTextField:
                    id: precio_input
                    hint_text: "Precio"
                    mode: "rectangle"
                    input_filter: "float"

                MDTextField:
                    id: stock_input
                    hint_text: "Stock"
                    mode: "rectangle"
                    input_filter: "int"

                MDTextField:
                    id: fecha_input
                    hint_text: "Fecha de vencimiento (YYYY-MM-DD)"
                    mode: "rectangle"

                MDTextField:
                    id: codigo_input
                    hint_text: "C贸digo de barras"
                    mode: "rectangle"

                MDRaisedButton:
                    id: boton_agregar
                    text: "Agregar Producto"
                    size_hint: None, None
                    width: dp(220)
                    height: dp(45)
                    pos_hint: {"center_x": 0.5}
                    md_bg_color: 0.2, 0.6, 0.9, 1
                    on_release: root.agregar_o_actualizar_producto()

            # ======================================
            # TABLA DERECHA
            # ======================================
            MDBoxLayout:
                orientation: "vertical"
                size_hint: 0.55, 1
                spacing: dp(15)

                MDBoxLayout:
                    size_hint_y: None
                    height: dp(50)
                    spacing: dp(10)
                    padding: dp(5)

                    MDTextField:
                        id: buscar_input
                        hint_text: "Buscar producto por nombre o c贸digo..."
                        mode: "rectangle"
                        on_text: root.buscar_productos()

                    MDRaisedButton:
                        text: "Buscar"
                        md_bg_color: 0.1, 0.6, 0.8, 1
                        size_hint_x: None
                        width: dp(120)
                        on_release: root.buscar_productos()

                ScrollView:
                    id: scroll_tabla
                    bar_width: dp(8)
                    scroll_type: ['bars', 'content']

                    MDBoxLayout:
                        id: tabla_productos
                        orientation: "vertical"
                        size_hint_y: None
                        height: self.minimum_height
                        spacing: dp(6)
                        padding: dp(6)
                        md_bg_color: 1,1,1,1
                        radius: [10]

        MDRaisedButton:
            text: "Volver al Panel"
            size_hint: None, None
            width: dp(200)
            height: dp(45)
            pos_hint: {"center_x": 0.5}
            md_bg_color: 0.4, 0.4, 0.4, 1
            on_release: root.volver_al_panel()
